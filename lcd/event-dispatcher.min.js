var ServerEventsDispatcher=function(n){var e=new WebSocket(n),t={},i={};this.bind=function(n,e){return t[n]=t[n]||[],t[n].push(e),this},this.bindOnce=function(n,e){return i[n]=e,this},this.send=function(n,t){var i=JSON.stringify({event:n,data:t});return e.send(i),this};var s=function(){e.onmessage=function(n){var e=JSON.parse(n.data);o(e.event,e.data)},e.onclose=function(n){o("close",n)},e.onopen=function(){o("open",null)}};s(),this.bind("close",t=>{1e3!==t.code&&setTimeout(function(){e=new WebSocket(n),s()},3e3)});var o=function(n,e){var s=t[n];if(void 0!==s)for(var o=0;o<s.length;o++)s[o](e);var r=i[n];void 0!==r&&(r(e),i[n]=void 0)}};function initWS(h,n){server=new ServerEventsDispatcher("ws://"+h),server.bind("open",()=>{n()}).bind("pushStatus",updateStatus).bind("pushQueue",updateQueue)}